<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Home Staging</title>
    <style>
        /* Add some basic styling for better presentation */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

        h1 {
            font-size: 28px; /* Adjust the font size as needed */
            margin-bottom: 20px;
        }

        h2 {
            margin-top: 50px;
            margin-bottom: 20px;
        }

        h3 {
            margin-top: 60px;
            margin-bottom: 10px;
        }

        h4 {
            margin-top: 60px;
            margin-bottom: 10px;
        }

        p {
            font-size: 16px; /* Adjust the font size as needed */
            max-width: 900px; /* Set the maximum width for the paragraph */
            margin: 0 auto; /* Center the paragraph */
            margin-bottom: 50px;
            text-align: left;
        }

        figure {
            display: inline-block;
            margin: 10px;
        }

        img {
            width: auto; /* Adjust the width as needed */
            height: 200px; /* Maintain aspect ratio */
        }

        video {
            width: 300px; /* Adjust the width as needed */
            height: auto; /* Maintain aspect ratio */
        }

        .image-container {
            display: flex;
            justify-content: space-around;
        }

        .larger-figure {
            width: 500px; /* Adjust the width of the larger figure */
        }

        figcaption {
            margin-top: 0px;
<!--            font-style: italic;-->
        }
    </style>
</head>
<body>
<h1>Virtual Home Staging and Relighting <br>from a
Single Panorama under Natural Illumination</h1>

<!--<p>Virtual Home Staging: Inverse Rendering and-->
<!--Editing an Indoor Panorama under Natural-->
<!--Illumination</p>-->

<p>We propose a novel inverse rendering method that enables the transformation
of existing indoor panoramas with new indoor furniture layouts under natural
illumination. To achieve this, we captured indoor HDR panoramas along with
real-time outdoor hemispherical HDR photographs. Indoor and outdoor HDR
images were linearly calibrated with measured absolute luminance values for accurate
    scene relighting. Our method consists of four key components: (1) panoramic
furniture detection and removal, (2) automatic floor layout design, (3) global
rendering with scene geometry, new furniture objects, and a real-time outdoor
photograph, and (4) editing camera position, outdoor illumination, scene textures,
    and electrical light. Additionally, we contribute a new calibrated HDR
(Cali-HDR) dataset that consists of 137 paired indoor and outdoor photographs.</p>

<h2>Overview</h2>
<div>
    <figure>
        <figcaption>Captured Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+penn+bed+07091127_empty.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Virtual Rendered Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+penn+bed+07091127_x=-0.5 y=-0.5 z=0.png" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/penn_ave_exi_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/penn_ave_teaser_66ms.gif" alt="Image 1">
    </figure>
 
</div>
<p>Illustration of Our Rendering Approach: A real-world scene is captured at 11:27 AM (cloudy sky condition).
    Different furniture objects are removed from the existing room, and the empty scene is refurnished with
    new virtual furniture objects. A new panorama is then virtually rendered with edited camera position,
    outdoor illumination at 01:00 PM (clear sky condition), scene textures, and electrical light.</p>


<h2>Automatic Floor Layout</h2>
<p>We edit the existing scenes with new floor layout. For empty scenes, we refurnish the scene with new furniture
    objects. For the furnished scenes, we detect and remove the existing furniture objects, and then virtually render
    the scenes with new furniture objects. </p>
<h4>Room 1</h4>
<div>
    <figure>
        <figcaption>Captured Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/1f_bed_20221006_1333.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Virtual Rendered Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/1f_bed_20221006_1333_render.png" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/1f_bed_exi_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/1f_bed_new_66ms.gif" alt="Image 1">
    </figure>
</div>

<h4>Room 2</h4>
<div>
    <figure>
        <figcaption>Captured Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+2F+entry+10141358_rgb.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Virtual Rendered Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+2F+entry+10141358.png" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/2f_entry_exi_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/2f_entry_new_66ms.gif" alt="Image 1">
    </figure>
</div>

<h4>Room 3</h4>
<div>
    <figure>
        <figcaption>Captured Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+murdoch+bed+R0011446_Exi.JPG" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Virtual Rendered Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+murdoch+bed+R0011446.jpg" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/murdoch_exi_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/murdoch_new_66ms.gif" alt="Image 1">
    </figure>
</div>

<h4>Room 4</h4>
<div>
    <figure>
        <figcaption>Captured Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+penn+bed+07091127_empty.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Virtual Rendered Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+penn+bed+07091127_new.png" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/penn_ave_exi_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/penn_ave_new_66ms.gif" alt="Image 1">
    </figure>
</div>

<h2>Editing Camera Positions</h2>
<div>
    <figure>
        <figcaption>Camera Position 1</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+coda+bed+R0011384_new_normal_x=1 y=-0.5 z=0.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Camera Position 2</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+coda+bed+R0011384_new_normal_x=-1 y=-1.5 z=0.png" alt="Image 2">
    </figure>
    <figure>
        <figcaption>Camera Position 3</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+coda+bed+R0011384_new_normal_x=-2 y=0 z=0.png" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/coda334+bed+R0011384_p1_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/coda334+bed+R0011384_p2_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/coda334+bed+R0011384_p3_66ms.gif" alt="Image 1">
    </figure>
</div>
<p>The camera position for virtual staging can be flexibly customized inside the rooms. Our rendering method
integrates complete 3D scene geometry (including both room geometry and furniture
objects), outdoor environment map, and material textures. By changing the camera position, the scene will be rendered
from different view positions.</p>

<h2>View to Outdoor Scene</h2>

<div>
    <figure>
        <figcaption>Virtual Indoor Scene 1</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+penn+bed+07091127_new.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Virtual Indoor Scene 2</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+coda+bed+R0011384_0957.png" alt="Image 2">
    </figure>
    <figure>
        <figcaption>Virtual Indoor Scene 3</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+2F+king+10141348_gt.jpg" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/new+penn+bed+07091127_outdoor_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/new+coda+bed+R0011384_outdoor_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/new+2F+king+10141348_outdoor_66ms.gif" alt="Image 1">
    </figure>
</div>
<p>When the camera position is closer to the window, the window pattern is removed, so the real-time outdoor scene can be
    observed from various indoor view directions and locations.</p>


<h2>Editing Scene Materials</h2>
<div>
    <figure>
        <figcaption>Rendered Existing Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+coda+bed+R0011384_0957.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Virtual Rendered Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+coda+bed+R0011384_new_material.png" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/coda334+bed+R0011384_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/coda334+bed+R0011384_new_material_66ms.gif" alt="Image 1">
    </figure>
</div>
<p>The 3D room geometry can be customized with new surface textures in the rendering model. In this example,
    we changed the wall painting and floor textures of the existing room.</p>

<h2>Editing Sun Positions</h2>
<h4>Edited Outdoor Images</h4>
<div>
    <figure>
        <figcaption>Outdoor Scene 1</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/2F-KING_newsun_outdoor_500ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Outdoor Scene 2</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/coda334_newsun_outdoor_500ms.gif" alt="Image 2">
    </figure>
    <figure>
        <figcaption>Outdoor Scene 3</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/Essex_newsun_outdoor_500ms.gif" alt="Image 2">
    </figure>
</div>
<p>In the real world, the outdoor scene changes throughout different times of the day.
    In this section, we focus on editing the direct illumination of the
sun in the outdoor image, allowing the indoor scene to be rendered under varying
sun positions. The figures above demonstrate the edited outdoor images
    under different weather conditions and at various time points.</p>

<h4>Virtual Rendered Scenes</h4>
<div>
    <figure>
        <figcaption>Rendered Scene 1 with Captured Outdoor Image</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+penn+bed+07091127_new.png" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Rendering with Edited Outdoor Images</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/penn_ave_sun_500ms.gif" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Rendered Scene 2 with Captured Outdoor Image</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+2F+king+10141348_gt.jpg" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Rendering with Edited Outdoor Images</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/2f_king_newsun_500ms.gif" alt="Image 2">
    </figure>
</div>
<p>In Rendered Scene 1, we add direct sunlight into the cloudy outdoor images, the scene is rendered with various
    sun positions during the day. In Rendered Scene 2, we adjust the sun position in the afternoon, allowing the
    indoor scene to showcase its changing appearance as the sun moves from early afternoon to late afternoon.</p>


<h2>Adding Electrical Light</h2>
<div>
    <figure>
        <figcaption>Rendered Daytime Scene</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+2F+king+10141348_gt.jpg" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Rendered Nighttime Scene 1 (LED 6336k)</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+2F+king+10141348_night6336k.png" alt="Image 2">
    </figure>
    <figure>
        <figcaption>Rendered Nighttime Scene 2 (LED 2660k)</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/new+2F+king+10141348_night2660k.png" alt="Image 2">
    </figure>
</div>
<div>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/2f_king_gt_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/2f_king_night_66ms.gif" alt="Image 1">
    </figure>
    <figure>
        <figcaption>Perspective View</figcaption>
        <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/gif/2f_king_night_2660_66ms.gif" alt="Image 1">
    </figure>
</div>
<p>We achieved virtual staging for the night scene, when the virtual scene is only illuminated
by electrical lighting with accurate spectra. The virtual scenes are rendered under different spectra and display unique
  indoor appearance.</p>


<h2>Calibrated HDR (Cali-HDR) Dataset</h2>
<figure>
    <figcaption>Indoor Panoramas</figcaption>
    <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/scene.jpg" alt="Image 1">
</figure>
<figure>
    <figcaption>Outdoor Images</figcaption>
    <img src="https://www.andrew.cmu.edu/user/gji/MVA_website/assets/imgs/env.jpg" alt="Image 1">
</figure>
<p>we contribute a new calibrated HDR (Cali-HDR) dataset that consists of 137 paired indoor and outdoor photographs.
In our work, we calibrate the captured HDR panoramas using absolute luminance value
    measured in each scene. This calibration
ensures that our HDR images accurately represent realistic spatially varying lighting
conditions. </p>

</body>
</html>
